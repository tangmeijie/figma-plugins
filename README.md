# Figmaæ’ä»¶å¼€å‘å·¥ç¨‹

è¿™æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘Figmaæ’ä»¶çš„é€šç”¨å·¥ç¨‹é¡¹ç›®ï¼Œæ”¯æŒTypeScriptå’Œæ¨¡å—åŒ–æ’ä»¶ç®¡ç†ã€‚

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ plugins/                 # æ’ä»¶ç›®å½•
â”‚   â””â”€â”€ fill-content-from-json/  # å¡«å……JSONå†…å®¹æ’ä»¶
â”‚       â”œâ”€â”€ code.ts          # TypeScriptæºä»£ç ï¼ˆåŒ…å«æ‰€æœ‰åŠŸèƒ½ï¼‰
â”‚       â”œâ”€â”€ code.js          # ç¼–è¯‘åçš„ä¸»ä»£ç æ–‡ä»¶ (æ„å»ºç”Ÿæˆ)
â”‚       â”œâ”€â”€ ui.html          # æ’ä»¶UIç•Œé¢
â”‚       â”œâ”€â”€ manifest.json    # æ’ä»¶é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ tsconfig.json    # TypeScriptç¼–è¯‘é…ç½®
â”œâ”€â”€ package.json            # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ package-lock.json       # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ .gitignore             # Gitå¿½ç•¥è§„åˆ™
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

1. **å®‰è£… Node.js**: https://nodejs.org/ (æ¨è LTS ç‰ˆæœ¬)
2. **å®‰è£…ä¾èµ–**:
   ```bash
   npm install
   ```

### é¦–æ¬¡ä½¿ç”¨

âš ï¸ **é‡è¦**: æ’ä»¶ä½¿ç”¨TypeScriptç¼–å†™ï¼Œå¿…é¡»å…ˆæ„å»ºæ‰èƒ½åœ¨Figmaä¸­ä½¿ç”¨ï¼

```bash
# 1. æ„å»ºæ’ä»¶
npm run build

# 2. éªŒè¯æ„å»ºç»“æœ - ç¡®ä¿ç”Ÿæˆäº† code.js æ–‡ä»¶
ls plugins/fill-content-from-json/code.js
```

æ„å»ºæˆåŠŸåï¼Œæ‚¨å°†çœ‹åˆ° `plugins/fill-content-from-json/` ç›®å½•ä¸‹ç”Ÿæˆäº† `code.js` æ–‡ä»¶ã€‚

## ğŸ”§ å¼€å‘æ¨¡å¼

### æ„å»ºå‘½ä»¤
```bash
# ä¸€æ¬¡æ€§æ„å»ºæ’ä»¶
npm run build

# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨ç¼–è¯‘ï¼‰
npm run dev

# æˆ–è€…ä½¿ç”¨ç›‘å¬æ¨¡å¼
npm run watch
```

### åœ¨Figmaä¸­æ·»åŠ æ’ä»¶

æ’ä»¶è¿è¡Œéœ€è¦ä»¥ä¸‹**å¿…éœ€æ–‡ä»¶**åœ¨åŒä¸€ç›®å½•ï¼š
- âœ… `manifest.json` - æ’ä»¶é…ç½®æ–‡ä»¶
- âœ… `code.js` - ç¼–è¯‘åçš„ä¸»ä»£ç æ–‡ä»¶
- âœ… `ui.html` - æ’ä»¶UIç•Œé¢æ–‡ä»¶ï¼ˆå¦‚æœæœ‰UIï¼‰

#### æ–¹æ³•ä¸€ï¼šFigmaæ¡Œé¢åº”ç”¨
1. æ‰“å¼€Figmaæ¡Œé¢åº”ç”¨
2. ç‚¹å‡»èœå• **Plugins** â†’ **Development** â†’ **Import plugin from manifest...**
3. é€‰æ‹©æ–‡ä»¶ï¼š`plugins/fill-content-from-json/manifest.json`
4. æ’ä»¶å°†å‡ºç°åœ¨æ’ä»¶åˆ—è¡¨ä¸­

#### æ–¹æ³•äºŒï¼šFigmaç½‘é¡µç‰ˆ
1. ç™»å½• https://figma.com
2. æ‰“å¼€ä»»æ„è®¾è®¡æ–‡ä»¶
3. å³é”®ç‚¹å‡»ç©ºç™½å¤„ â†’ **Plugins** â†’ **Development** â†’ **Import plugin from manifest...**
4. é€‰æ‹©æ–‡ä»¶ï¼š`plugins/fill-content-from-json/manifest.json`

#### ğŸ”„ é‡æ–°åŠ è½½æ’ä»¶ (é‡è¦!)
**æ¯æ¬¡ä¿®æ”¹ä»£ç åï¼Œéœ€è¦åœ¨Figmaä¸­é‡æ–°åŠ è½½æ’ä»¶ï¼š**
1. å³é”®ç‚¹å‡»ç”»å¸ƒ â†’ **Plugins** â†’ **Development** â†’ **Hot reload plugin**
2. æˆ–è€…é‡æ–°å¯¼å…¥manifest.jsonæ–‡ä»¶

## ğŸ“¦ å·²æœ‰æ’ä»¶

- **Fill Content from JSON** - ä»JSONæ•°æ®è‡ªåŠ¨å¡«å……Figmaæ–‡æœ¬å›¾å±‚ï¼Œæ”¯æŒåµŒå¥—ç»“æ„å’Œæ™ºèƒ½åŒ¹é…

## ğŸ†• å¼€å‘æ–°æ’ä»¶

### åˆ›å»ºæ–°æ’ä»¶æ­¥éª¤
1. **åˆ›å»ºæ’ä»¶ç›®å½•**:
   ```bash
   mkdir plugins/your-plugin-name
   cd plugins/your-plugin-name
   ```

2. **åˆ›å»ºå¿…éœ€æ–‡ä»¶**:
   - `manifest.json` - æ’ä»¶é…ç½® (å‚è€ƒç°æœ‰æ’ä»¶)
   - `code.ts` - TypeScriptæºä»£ç 
   - `ui.html` - UIç•Œé¢ (å¯é€‰)
   - `tsconfig.json` - TypeScripté…ç½® (å¤åˆ¶ç°æœ‰é…ç½®)

3. **æ›´æ–°æ„å»ºé…ç½®**:
   ç”±äºå½“å‰ `package.json` ä¸­çš„æ„å»ºå‘½ä»¤åªé’ˆå¯¹ `fill-content-from-json`ï¼Œæ‚¨éœ€è¦ï¼š
   
   **é€‰é¡¹A**: ä¿®æ”¹ `package.json` æ·»åŠ æ–°æ’ä»¶çš„æ„å»ºè„šæœ¬
   **é€‰é¡¹B**: æ‰‹åŠ¨æ„å»ºæ–°æ’ä»¶:
   ```bash
   # åœ¨æ’ä»¶ç›®å½•ä¸‹æ‰‹åŠ¨ç¼–è¯‘
   npx tsc -p plugins/your-plugin-name/tsconfig.json
   ```

4. **åœ¨Figmaä¸­æµ‹è¯•**:
   å¯¼å…¥æ–°æ’ä»¶çš„ `manifest.json` æ–‡ä»¶

### æ’ä»¶åŸºæœ¬ç»“æ„æ¨¡æ¿

**manifest.json æ¨¡æ¿**:
```json
{
  "name": "Your Plugin Name",
  "id": "your-plugin-id",
  "api": "1.0.0",
  "main": "code.js",
  "ui": "ui.html",
  "editorType": ["figma"],
  "permissions": ["currentuser"],
  "networkAccess": {
    "allowedDomains": ["none"]
  },
  "documentAccess": "dynamic-page"
}
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

**âŒ é—®é¢˜ï¼šæ’ä»¶æ— æ³•åŠ è½½**
- âœ… è§£å†³ï¼šç¡®ä¿è¿è¡Œäº† `npm run build` ç”Ÿæˆ `code.js` æ–‡ä»¶
- âœ… æ£€æŸ¥ï¼š`manifest.json` ä¸­çš„ `main` å­—æ®µæŒ‡å‘æ­£ç¡®çš„ `.js` æ–‡ä»¶

**âŒ é—®é¢˜ï¼šä»£ç ä¿®æ”¹åæ²¡æœ‰ç”Ÿæ•ˆ**
- âœ… è§£å†³ï¼šé‡æ–°æ„å»ºæ’ä»¶ (`npm run build`)
- âœ… è§£å†³ï¼šåœ¨Figmaä¸­é‡æ–°åŠ è½½æ’ä»¶ (Hot reload plugin)

**âŒ é—®é¢˜ï¼šTypeScriptç¼–è¯‘é”™è¯¯**
- âœ… æ£€æŸ¥ï¼š`tsconfig.json` é…ç½®æ˜¯å¦æ­£ç¡®
- âœ… æ£€æŸ¥ï¼šæ˜¯å¦å®‰è£…äº†æ‰€éœ€çš„ç±»å‹å®šä¹‰ (`@figma/plugin-typings`)

**âŒ é—®é¢˜ï¼šæ’ä»¶åœ¨Figmaä¸­æ‰¾ä¸åˆ°**
- âœ… ç¡®ä¿ï¼šé€‰æ‹©äº†æ­£ç¡®çš„ `manifest.json` æ–‡ä»¶è·¯å¾„
- âœ… ç¡®ä¿ï¼š`code.js` å’Œ `manifest.json` åœ¨åŒä¸€ç›®å½•

### è°ƒè¯•æŠ€å·§
- ğŸ“ åœ¨Figmaä¸­æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯
- ğŸ” ä½¿ç”¨ `console.log()` åœ¨æ’ä»¶ä»£ç ä¸­æ·»åŠ è°ƒè¯•ä¿¡æ¯
- ğŸ§ª ä½¿ç”¨ `npm run lint` æ£€æŸ¥ä»£ç è¯­æ³•é—®é¢˜

## ğŸ’¡ å¼€å‘æç¤º

### ğŸ“‹ å¼€å‘æœ€ä½³å®è·µ
- **ä»£ç ä¿®æ”¹å**: å§‹ç»ˆè¿è¡Œ `npm run build` é‡æ–°ç¼–è¯‘
- **å¼€å‘æ¨¡å¼**: ä½¿ç”¨ `npm run dev` æˆ– `npm run watch` è‡ªåŠ¨ç›‘å¬æ–‡ä»¶å˜åŒ–
- **æµ‹è¯•å‰**: ç¡®ä¿ç¼–è¯‘ç”Ÿæˆäº†æœ€æ–°çš„ `code.js` æ–‡ä»¶
- **æ’ä»¶é‡è½½**: æ¯æ¬¡ä¿®æ”¹ååœ¨Figmaä¸­é‡æ–°åŠ è½½æ’ä»¶
- **ä»£ç æ£€æŸ¥**: å®šæœŸä½¿ç”¨ `npm run lint` æ£€æŸ¥ä»£ç è§„èŒƒ
- **è‡ªåŠ¨ä¿®å¤**: ä½¿ç”¨ `npm run lint:fix` è‡ªåŠ¨ä¿®å¤ä»£ç æ ¼å¼é—®é¢˜
- **æ¸…ç†æ–‡ä»¶**: ä½¿ç”¨ `npm run clean` åˆ é™¤ç¼–è¯‘ç”Ÿæˆçš„ `code.js` æ–‡ä»¶

### ğŸš€ æ•ˆç‡æå‡
- ğŸ“ ä¿æŒé¡¹ç›®ç»“æ„æ•´æ´ï¼Œéµå¾ªç°æœ‰çš„æ–‡ä»¶ç»„ç»‡æ–¹å¼
- ğŸ”„ å¼€å‘æ—¶å¯ç”¨ watch æ¨¡å¼ï¼Œå‡å°‘æ‰‹åŠ¨æ„å»ºæ¬¡æ•°
- ğŸ“Š åˆ©ç”¨Figmaçš„å¼€å‘è€…å·¥å…·è¿›è¡Œè°ƒè¯•
- ğŸ“š å‚è€ƒ [Figma Plugin API æ–‡æ¡£](https://www.figma.com/plugin-docs/) è·å–æœ€æ–°ä¿¡æ¯

### ğŸ¯ æ€§èƒ½ä¼˜åŒ–
- âš¡ é¿å…åœ¨æ’ä»¶ä¸­è¿›è¡Œå¤§é‡DOMæ“ä½œ
- ğŸ¨ åˆç†ä½¿ç”¨Figma APIï¼Œé¿å…ä¸å¿…è¦çš„èŠ‚ç‚¹éå†
- ğŸ’¾ ç¼“å­˜é‡å¤è®¡ç®—çš„ç»“æœ

---

ğŸ‰ **å¼€å§‹æ‚¨çš„Figmaæ’ä»¶å¼€å‘ä¹‹æ—…å§ï¼** å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ•…éšœæ’é™¤ç« èŠ‚æˆ–å‚è€ƒFigmaå®˜æ–¹æ–‡æ¡£ã€‚
